{% extends "basemd.html" %}
{% block title %}
  Comparar Sector
{% endblock title %}
{% block menu %}
  {% if user.get_profile.empdni.charge.area|lower == 'ventas' or user.get_profile.empdni.charge.area|lower == 'administrator' %}
    {% include "menus/salesmd.html" %}
  {% endif %}
  {% if user.get_profile.empdni.charge.area|lower == 'logistica' %}
    {% include "menus/logisticsmd.htm" %}
  {% endif %}
  {% if user.get_profile.empdni.charge.area|lower == 'operaciones' %}
    {% include "menus/operationsmd.htm" %}
  {% endif %}
  {% if user.get_profile.empdni.charge.area|lower == 'almacen' %}
    {% include "menus/storagemd.htm" %}
  {% endif %}
{% endblock menu %}
{% block content %}
<section ng-app="compareApp" ng-controller="ctrl">
{% if request.user.get_profile.empdni.charge.area|lower == 'administrator' or request.user.get_profile.empdni.charge.area|lower == 'ventas' %}
  <div class="card card-panel">
    {% verbatim %}
      <div class="card-content">
        <strong>{{currency}}</strong>
        <div class="row">
          <div class="col l3">
            <div class="center-align">
              <h5>Aprox.</h5>
              <h4><small>{{symbol}} {{salesap|number:2}}</small></h4>
            </div>
          </div>
          <div class="col l3">
            <div class="center-align">
              <h5>Ventas</h5>
              <h4><small>{{symbol}} {{sales|number:2}}</small></h4>
            </div>
          </div>
          <div class="col l3">
            <div class="center-align">
              <h5>Operaciones</h5>
              <h4><small>{{symbol}} {{operations|number:2}}</small></h4>
            </div>
          </div>
          <div class="col l3">
            <div class="center-align">
              <h5>Diferencia</h5>
              <h4><small>{{symbol}} {{diff|number:2}}</small></h4>
            </div>
          </div>
        </div>
      </div>
    {% endverbatim %}
  </div>
{% endif %}
  <table class="table responsive-table highlight">
    <thead style="border: 1px solid black;">
      <tr style="border: 1px solid black;">
        <th colspan="6">
          <div class="input-field">
            <i class="fa fa-search prefix"></i>
            <input type="text" ng-model="search">
            <label for="icon_prefix">Buscar ...</label>
          </div>
        </th>
        <th style="border: 1px solid black;" class="center-align">PRECIO</th>
        <th style="border: 1px solid black;" class="center-align" colspan="2">CANTIDADES</th>
        <th class="center-align">
          <button type="button" class="btn-flat waves-effect waves-teal" ng-click="loadList()">
            <i class="fa fa-refresh"></i>
          </button>
        </th>
      </tr>
      <tr>
        <th></th>
        <th>Codigo</th>
        <th>Descripcion</th>
        <th>Marca</th>
        <th>Model</th>
        <th>Unidad</th>
        <th style="border: 1px solid black;" class="center-align">Compra</th>
        <th style="border: 1px solid black;" class="center-align">Ventas</th>
        <th style="border: 1px solid black;" class="center-align">Operaciones</th>
        <th style="border: 1px solid black;">Importe</th>
      </tr>
      <tr ng-model="loader" ng-init="loader=false" ng-hide="loader">
        <th colspan="10">
          <div class="progress">
            <div class="indeterminate"></div>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      {#% for x in lst|dictsort:"name" %#}
      {% verbatim %}
         <tr ng-repeat="x in list | orderBy: 'name' | filter: search" ng-dblclick="openEdit($event)">
            <td>{{$index + 1}}</td>
            <td>{{x.materials}}</td>
            <td>{{x.name}}</td>
            <td>{{x.brand}}</td>
            <td>{{x.model}}</td>
            <td class="center-align">{{x.unit}}</td>
            <td class="center-align">{{x.purchase|number:2}}</td>
            <th class="center-align">{{x.sales|number:2}}</th>
            <th class="center-align">{{x.operations|number:2}}</th>
            <th>{{x.amount|number:2}}</th>
          </tr>
      {% endverbatim %}
      {#% endfor %#}
    </tbody>
  </table>
  <div id="medit" class="modal">
    <div class="modal-content">
      <h5>Editar Material</h5>
      <table class="table responsive-table highlight">
        {% verbatim %}
        <tbody>
          <tr>
            <th>
              <div class="input-field ">
                <select ng-model="ebrand" ng-options="x.id as x.name for x in brand" ng-change="lmodel()"></select>
                <label for="">Marca</label>
              </div>
            </th>
            <th>
              <div class="input-field ">
                <select ng-model="emodel" ng-options="id as name for x in model"></select>
                <label for="">Modelo</label>
              </div>
            </th>
            <th>
              <div class="input-field ">
                <input type="text">
                <label for="input">Precio de Compra</label>
              </div>
            </th>
          </tr>
        </tbody>
        {% endverbatim %}
      </table>
    </div>
    <div class="modal-footer">
      <button type="button" class="modal-action modal-close waves-effect waves-green btn-flat">
        Cancelar
      </button>
      {% verbatim %}
        <button type="button" class="btn" value="{{ematc}}">Guardar Cambios</button>
      {% endverbatim %}
    </div>
  </div>
</section>
<script src="{{ MEDIA_URL }}vendor/angular/angular.min.js"></script>
<script src="{{ MEDIA_URL }}vendor/angular-cookies/angular-cookies.min.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/operations/comparelist.js"></script>
<!--<script type="text/javascript" src="{{ MEDIA_URL }}js/operations/factory/DSMetrado.js"></script>-->
{% endblock content %}